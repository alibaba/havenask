# *-* coding:utf-8 *-*
import os
import sys
HERE = os.path.split(os.path.realpath(__file__))[0]
sys.path.append(os.path.abspath(os.path.join(HERE, "../../common")))
import util


def build_prepare():
    configRoot = os.path.join(HERE, './config/offline_config/')
    dataPath = os.path.join(HERE, '../../data/vector.data')
    if not util.copyPlugin(plugin="libaitheta_indexer.so", targetPath=configRoot):
        sys.exit(-1)
    return configRoot, dataPath
        
        
def search_prepare():
    configDir = os.path.join(HERE, './config/online_config')
    tableConfigDir = os.path.join(configDir, "table")
    if not util.copyPlugin(plugin="libaitheta_indexer.so", targetPath=tableConfigDir):
        sys.exit(-1)
    testQueries = [
        "select id,url from in0 where MATCHINDEX('vec_index', '0.57350874,0.20913178,-0.28007376,-0.008224763,0.032035876,-0.06109254,0.016208794,0.2546715,-0.5938332,0.2194785,-0.603397,0.095939286,-0.4343296,0.29292983,0.19570276,0.07006806,0.4219676,0.008796717,-0.1956801,0.10365201,-0.18756211,-0.1959297,-0.64994687,-0.0043594907,-0.12155021,-0.37211925,-0.033330534,0.37927315,0.14685613,0.14631498,0.2263155,0.020013737,-0.48688003,0.38279092,-0.14551091,-0.14309452,0.0836372,-0.2602252,-0.68886805,-0.18670991,0.026953692,-0.1361577,0.54825664,0.5495113,-0.11404511,0.020755235,-0.3592109,0.35327643,-0.17384957,0.06951289,-0.33219633,0.32536888,0.4178303,0.06838637,-0.32600296,-0.39717215,0.37040582,0.2577843,-0.022891786,-0.19590716,-0.34784496,0.45056996,-0.16618372,-0.048093718,-0.4501398,0.16741453,0.0021240758,-0.22811683,-0.30895764,-0.29165566,0.51220524,0.26545066,-0.46743664,-0.18925984,0.11317849,0.01674415,-0.41176468,-0.41503182,-0.52814317,-0.52559006,0.5788051,0.12608618,0.62300944,0.20152776,-0.39167175,0.099368036,0.34757188,-0.2860248,0.47917366,0.44290003,-0.3663736,0.074007034,-0.44493687,0.5212625,0.5742631,0.06809457,0.20434684,-0.2527957,0.08273791,-0.5062737,0.30677673,0.0037546167,0.53646725,0.6939553,-0.19357872,0.62397563,-0.25602227,-0.73345435,0.23730282,-0.11466419,-0.22964483,-0.18373214,-0.28414255,0.67296755,0.38798898,-0.0795316,0.050292946,0.51636153,-0.3399461,0.14268692,-0.5273593,-0.055386372,-0.29121432,-0.36689624,0.762627,0.14242941,0.14173277,0.08323621&n=10')"
    ]
    return configDir, testQueries
