load('//bazel:bundle.bzl', 'bundle_files')
filegroup(name='bs', srcs=['bin/bs'], visibility=['//visibility:public'])
bundle_files(
    name='bs_bin_package',
    srcs=[':bs'],
    prefix='usr/local',
    visibility=['//visibility:public']
)
bundle_files(
    name='install_etcs',
    srcs=glob(['etc/bs_tools/*.py']),
    prefix='usr/local',
    visibility=['//visibility:public'],
    deps=[':bs_tools_package']
)
bundle_files(
    name='bs_tools_package',
    srcs=['bs_tools/tools_config.py'],
    prefix='usr/local/etc'
)
py_library(
    name='bs_tools',
    srcs=glob(['bs_tools/*.py']),
    data=[
        '//aios/apps/facility/build_service/build_service/tools:bs_generation_scanner',
        '//aios/filesystem/fslib/tools:fs_util_bin'
    ],
    visibility=['//visibility:public'],
    deps=[
        '//aios/apps/facility/build_service:proto_py',
        '//aios/hippo/lib/python/site_packages:hippo_py_sdk',
        '//aios/network/arpc:arpc_python'
    ]
)
py_library(
    name='bs_tools_include',
    srcs=[
        'bs_tools/include/__init__.py', 'bs_tools/include/json_wrapper.py',
        'bs_tools/include/protobuf_json.py'
    ],
    visibility=['//visibility:public']
)
